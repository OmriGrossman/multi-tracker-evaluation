# Comparative Evaluation of Three Bounding-Box Trackers

## Objective

This project compares three bounding-box trackers—ByteTrack, DeepSORT, and BOTSort—using bounding boxes generated by a lightweight YOLO model. Each tracker's performance in maintaining object identities through partial occlusions and missing detections is evaluated using standard tracking metrics.

## Tracker Descriptions

### ByteTrack

* Uses IoU-based tracking with a strong emphasis on detection confidence.
* Highly efficient at associating tracks without heavy computational overhead.

### DeepSORT

* Combines Kalman filter predictions with appearance embeddings.
* Effective at re-identifying objects after occlusions due to feature embeddings.

### BOTSort

* An advanced tracker integrating IoU tracking with motion modeling.
* Balances tracking precision and computational efficiency, suited for real-time applications.

## Setup Instructions

### Prerequisites

* Python 3.8 or higher
* Recommended: Anaconda or virtual environment

### Installation

Clone this repository and install dependencies:

```bash
git clone https://github.com/OmriGrossman/multi-tracker-evaluation.git
cd multi-tracker-evaluation
pip install -r requirements.txt
```

### Directory Structure

```
.
├── data
│   ├── input_video.mp4
│   ├── gt.txt
│   └── detections.txt
├── results
│   ├── results_bytetrack.txt
│   ├── results_deepsort.txt
│   └── results_botsort.txt
├── evaluation_results
│   ├── tracker_comparison.csv
│   └── runtime_log.txt
├── detect.py
├── track_bytetrack.py
├── track_deepsort.py
├── track_botsort.py
├── evaluate.py
├── visualize_tracks.py
├── requirements.txt
└── .gitignore
```

## Video Source and Ground Truth

The primary test video used in this project is [MOT17-09-SDP](https://motchallenge.net/vis/MOT17-09-SDP), sourced from the [MOT17 dataset](https://motchallenge.net/data/MOT17/).

You may use any video from the MOT17 "train" section, as these include the `gt/gt.txt` file containing ground truth annotations. These videos are distributed in MPEG format. To convert the video into an MP4 file compatible with OpenCV and YOLOv8, use FFmpeg:

```bash
ffmpeg -i MOT17-09-SDP.mp4 -c:v libx264 -pix_fmt yuv420p data/input_video.mp4
```

Ensure that the corresponding ground truth file is placed at `data/gt.txt` for evaluation purposes.

## Usage

### 1. Object Detection

Run YOLO to detect objects and save the detections:

```bash
python detect.py
```

* **Output format**: `frame_id,x1,y1,x2,y2,confidence,class_id`

### 2. Tracking

Execute each tracker separately using YOLO detections:

* **ByteTrack**:

```bash
python track_bytetrack.py
```

* **DeepSORT**:

```bash
python track_deepsort.py
```

* **BOTSort**:

```bash
python track_botsort.py
```

* **Output format for trackers**: `frame_id,track_id,x,y,width,height,confidence,class_id,visibility`

Each tracker also logs its runtime in `evaluation_results/runtime_log.txt`.

### 3. Evaluation

Run evaluation metrics comparing trackers against the ground truth:

```bash
python evaluate.py
```

* **Results** will be printed and saved in `evaluation_results/tracker_comparison.csv`


Note: This step is optional and not required for metric evaluation.

## Adjusting YAML Configuration for ByteTrack and BOTSort

ByteTrack and BOTSort use YAML files (`bytetrack.yaml` and `botsort.yaml`) for configuring tracker parameters, including `track_buffer` (equivalent to `max_age`).

### Recommended: Edit the Default YAML Directly

You can directly modify the original YAML configuration files located at:

```
<your-env>/lib/pythonX.X/site-packages/ultralytics/cfg/trackers/
```

These YAML files are used by default by the Ultralytics `model.track()` method. Modifying them affects all uses of the trackers within this environment.

**Example (in **``bytetrack.yaml or botsort.yaml``**)**:

```yaml
tracker_type: bytetrack  # or botsort
track_thresh: 0.5
track_buffer: 30  # How many frames a track persists without detection
match_thresh: 0.8
```

> ⚠️ Note: These changes may be lost if the Ultralytics package is updated or reinstalled.

### Alternative: Use a Custom YAML File

1. Copy the tracker YAML to your project directory and rename it (e.g., `bytetrack_custom.yaml`).
2. Edit it to change the parameters (like above).
3. In your script, override the default:

```python
TRACKER_CONFIG = 'bytetrack_custom.yaml'
```


## Comparative Metrics

The following KPIs are used for evaluating tracker performance:

* **MOTA (Multi-Object Tracking Accuracy)**: Indicates overall tracking effectiveness, combining false positives, missed detections, and ID switches.
* **MOTP (Multi-Object Tracking Precision)**: Measures localization precision of bounding boxes.
* **ID Switches**: Count of tracker identity changes.
* **Fragmentations**: Frequency of interrupted tracking sequences.
* **Mostly Tracked/Lost (%)**: Percentage of objects tracked successfully or unsuccessfully across frames.
* **Average Track Length**: Indicates track persistence.
* **Estimated ID Switches**: Heuristic measure to detect gaps within tracks.
* **Runtime (s)**: Total execution time for the tracking script.

## Parameter Tuning

* Confidence thresholds for detections (`CONF_THRESHOLD`) and tracking persistence (`max_age` or `track_buffer`) are explicitly documented within scripts (`detect.py` and tracking scripts).

## .gitignore

This project includes a `.gitignore` that excludes Python cache files, virtual environments, YOLO weights, IDE settings, and generated data/results directories to keep the repository clean.
